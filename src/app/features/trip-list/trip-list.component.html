<div class="trip-list-page">
  <app-header></app-header>
  <div fxLayout="column" fxLayoutAlign="center">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
       <mat-card class="search-trip-form">
        <mat-form-field appearance="fill">
          <mat-label>Departure</mat-label>
          <mat-select formControlName="departure" [(ngModel)]="selectedDeparture">
            <mat-option *ngFor="let city of cities" [value]="city.locationId">
            {{city.name}}
            </mat-option>
          </mat-select>
          </mat-form-field>
          <span  fxShow="false" fxShow.gt-xs="true" style="margin-top: 2.5%;" (click)="ExchangeTrip() " class="content-icon material-icons">
						sync_alt
						</span>
					
              &nbsp;
              <mat-form-field appearance="fill">
                <mat-label>Destination</mat-label>
                <mat-select formControlName="destination" [(ngModel)]="selectedDestination">
                <mat-option *ngFor="let city of cities" [value]="city.locationId">
                  {{city.name}}
                </mat-option>
                </mat-select>
              </mat-form-field>
                &nbsp;
              <mat-form-field style="margin-top: 1.3%;">
                <mat-label>Trip Date</mat-label>
                <input type="date" matInput [ngModel] ="now | date:'yyyy-MM-dd'"  formControlName="tripDate">
              </mat-form-field>
              &nbsp;
              <div style="margin-top: 2.5%;margin-left: 1%;"> 
              <mat-spinner *ngIf="loading" diameter="20" color="accent" ></mat-spinner>
              <a *ngIf="!loading" class="heading-button-right search-button" mat-flat-button (click)="onSubmit()"  color="success">Search</a>
            </div>

           </mat-card>
     </form>
<div class="trip-list-body" *ngIf="!loading" >
  <div fxFlex="100%">
    <mat-card class="no-trip-found" *ngIf="route.length == 0">
          {{searchResultmessage}}
      </mat-card>
    <div *ngIf="route.length != 0">
    <mat-card class="trip-lists"  *ngFor="let trip of route">
     <div class="trip-item">
       <div class="operator-name" flex="1">
         {{trip.operator}} BUS
       </div>
       <div class="trip-detail" >
        <div class="trip-detail-item">
          <i class="material-icons trip-result-icon">
            place
          </i> <br/>
         <div class="trip-detail-property"> Departure - Destination </div>  <br/>
         <div class="trip-detail-value"> {{trip.departureLocation}} - {{trip.arrivalLocation}} </div>
        </div>

        <div class="trip-detail-item">
          <i class="material-icons trip-result-icon">
            airline_seat_recline_normal
          </i> <br/>
          <div class="trip-detail-property">Seat Available</div> <br/>
          <div class="trip-detail-value">{{trip.availableSeats.length}}</div>
        </div>

        <div class="trip-detail-item">
          <i class="material-icons trip-result-icon">
           watch_later
          </i> <br/>
          <div class="trip-detail-property">Departure Time  </div><br/>
            <div class="trip-detail-value">{{trip.departureTime|date:'MMM d, y, h:mm:ss a'	}}</div>
        </div>

        <div class="trip-detail-item">
          <i class="material-icons trip-result-icon">
            payments
          </i> <br/>
          <div class="trip-detail-property">{{trip.price}} Birr</div> <br/>
           <a class="heading-button-right success" mat-flat-button color="success" (click)="ReserveSeat(trip)">Reserve</a>
        </div>
       </div>
     </div>
    </mat-card>
  </div>
  </div>
</div>
</div>
</div>


